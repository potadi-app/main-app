{% extends "layout/base.html" %}
{% load static %}
{% block title %}Diagnosis{% endblock title %}

{% block content %}

<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <!--begin::Post-->
    <div class="post d-flex flex-column-fluid" id="kt_post">
        <!--begin::Container-->
        <div id="kt_content_container" class="container-xxl">
            <!--begin::Card-->
            <div class="card shadow-lg">
                <!--begin::Card body-->
                <div class="card-body">
                    {% if result %}

                    <!--begin::Result Diagnosis-->
                    {% include "diagnosis/partials/result-diagnose.html" %}
				    <!--end::Result Diagnosis-->
                    
                    {% else %}
                    
                    <!--begin::Start Diagnosis-->
                    {% include "diagnosis/partials/start-diagnose.html" %}                   
				    <!--end::Start Diagnosis-->
                   
                    {% endif %}

                </div>
                <!--end::Card body-->
            </div>
            <!--end::Card-->
        </div>
        <!--end::Container-->
    </div>
</div>
<!--end::Post-->
{% endblock content %}

{% block modals %}
<!--begin::Modal - Diagnosa-->
<div class="modal fade" id="kt_modal_two_factor_authentication" tabindex="-1" aria-hidden="true">
    <!--begin::Modal header-->
    <div class="modal-dialog modal-dialog-centered mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
            <!--begin::Modal header-->
            <div class="modal-header flex-stack">
                <!--begin::Title-->
                <h2>Pilih Mode Diagnosa</h2>
                <!--end::Title-->
                <!--begin::Close-->
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
                <!--end::Close-->
            </div>
            <!--begin::Modal header-->
            <!--begin::Modal body-->
            <div class="modal-body scroll-y pt-10 pb-15 px-lg-17">
                <!--begin::Options-->
                <div data-kt-element="options">
                    <!--begin::Notice-->
                    <p class="text-muted fs-5 fw-semibold mb-10">Kamu bisa memilih 2 mode untuk mendiagnosa. Pastikan gambar daun kentang kamu terlihat dengan jelas.</p>
                    <!--end::Notice-->
                    <!--begin::Wrapper-->
                    <div class="pb-10">
                        <!--begin::Option-->
                        <input type="radio" class="btn-check" name="auth_option" value="apps" checked="checked" id="kt_modal_two_factor_authentication_option_1" />
                        <label class="btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-5" for="kt_modal_two_factor_authentication_option_1">
                            <i class="ki-duotone ki-folder-up fs-4x me-4">
                                <span class="path1"></span>
                                <span class="path2"></span>
                            </i>
                            <span class="d-block fw-semibold text-start">
                                <span class="text-dark fw-bold d-block fs-3">Upload Gambar</span>
                                <span class="text-muted fw-semibold fs-6">Silahkan unggah gambar daun kentang Anda, dan sistem kami akan mendiagnosa penyakitnya dengan cepat.</span>
                            </span>
                        </label>
                        <!--end::Option-->
                        <!--begin::Option-->
                        <input type="radio" class="btn-check" name="auth_option" value="sms" id="kt_modal_two_factor_authentication_option_2" />
                        <label class="btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center" for="kt_modal_two_factor_authentication_option_2">
                            <i class="ki-duotone ki-monitor-mobile fs-4x me-4">
                                <span class="path1"></span>
                                <span class="path2"></span>
                                <span class="path3"></span>
                            </i>
                            <span class="d-block fw-semibold text-start">
                                <span class="text-dark fw-bold d-block fs-3">Mode Capture</span>
                                <span class="text-muted fw-semibold fs-6">Kamu bisa menggunakan kamera perangkat (jika tersedia) untuk melakukan diagnosis dengan cara tangkap gambar.</span>
                            </span>
                        </label>
                        <!--end::Option-->
                    </div>
                    <!--end::Options-->
                    <!--begin::Action-->
                    <button class="btn btn-primary w-100" data-kt-element="options-select">Lanjut</button>
                    <!--end::Action-->
                </div>
                <!--end::Options-->
                <!--begin::Apps-->
                <div class="d-none" data-kt-element="apps">
                    <!--begin::Heading-->
                    <h3 class="text-dark fw-bold mb-7">Upload Gambar</h3>
                    <!--end::Heading-->
                    <!--begin::Description-->
                    <div class="text-gray-500 fw-semibold fs-6 mb-10">Sebelum mengunggah pastikan gambar terlihat dengan jelas.
                    <!--end::Description-->

                    <!--begin::Form-->
                    <form data-kt-element="apps-form" id='form-diagnose' class="form" action="{% url 'diagnosis' %}" method='post' enctype="multipart/form-data">
                        {% csrf_token %}
                        <!--begin::Input group-->
                        <div class="fv-row mb-2 pt-5">
                            <!--begin::Dropzone-->
                            <div class="dropzone" id="kt_ecommerce_add_product_media">
                                <!--begin::Message-->
                                <div class="dz-message needsclick">
                                    <!--begin::Icon-->
                                    <i class="ki-duotone ki-file-up text-primary fs-3x">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                    </i>
                                    <!--end::Icon-->
                                    <!--begin::Info-->
                                    <div class="ms-4">
                                        <h3 class="fs-5 fw-bold text-gray-900 mb-1">Drop files here or click to upload.</h3>
                                        <span class="fs-7 fw-semibold text-gray-400">Upload only 1 image</span>
                                    </div>
                                    <!--end::Info-->
                                </div>
                                <input type="file" id="imageInput" name="image_file" accept="image/*" style="display: none;">
                            </div>
                            <!--end::Dropzone-->
                        </div>
                        <!--end::Input group-->                
                    
                        <!--begin::Actions-->
                        <div class="d-flex flex-center mt-5">
                            <button type="reset" data-kt-element="apps-cancel" class="btn btn-light me-3">Cancel</button>
                            <button type="submit" data-kt-element="apps-submit" class="btn btn-primary">
                                <span class="indicator-label">Submit</span>
                                <span class="indicator-progress">Please wait...
                                <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                            </button>
                        </div>
                        <!--end::Actions-->
                    </form>
                    <!--end::Form-->
                    
                </div>
                <!--end::Options-->

                <!--begin::SMS-->
                <div class="d-none" data-kt-element="sms">
                    <!--begin::Heading-->
                    <h3 class="text-dark fw-bold fs-3 mb-5">SMS: Verify Your Mobile Number</h3>
                    <!--end::Heading-->
                    <!--begin::Notice-->
                    <div class="text-muted fw-semibold mb-10">Enter your mobile phone number with country code and we will send you a verification code upon request.</div>
                    <!--end::Notice-->
                    <!--begin::Form-->
                    <form data-kt-element="sms-form" class="form" action="#">
                        <!--begin::Input group-->
                        <div class="mb-10 fv-row">
                            <input type="text" class="form-control form-control-lg form-control-solid" placeholder="Mobile number with country code..." name="mobile" />
                        </div>
                        <!--end::Input group-->
                        <!--begin::Actions-->
                        <div class="d-flex flex-center">
                            <button type="reset" data-kt-element="sms-cancel" class="btn btn-light me-3">Cancel</button>
                            <button type="submit" data-kt-element="sms-submit" class="btn btn-primary">
                                <span class="indicator-label">Submit</span>
                                <span class="indicator-progress">Please wait...
                                <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                            </button>
                        </div>
                        <!--end::Actions-->
                    </form>
                    <!--end::Form-->
                </div>
                <!--end::SMS-->
            </div>
            <!--begin::Modal body-->
        </div>
        <!--end::Modal content-->                

    </div>
    <!--end::Modal header-->
</div>
<!--end::Modal - Diagnosa-->
{% endblock modals %}

{% block custom_js %}
<script src="{% static 'assets/js/custom/utilities/modals/two-factor-authentication.js' %}"></script>
{% endblock custom_js %}